webpackJsonp([1],{"/qcU":function(e,t,a){var n=a("EONW");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("2c762bd7",n,!0)},"9bBU":function(e,t,a){a("mClu");var n=a("FeBl").Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},EONW:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.markred[data-v-7ddb60a6] {\n  color: red;\n}\n.tablebox[data-v-7ddb60a6] {\n  height: 360px;\n  background: #fff;\n  padding: 10px;\n}\n.bg[data-v-7ddb60a6] {\n  background: #efefef;\n  height: 100%;\n}\n.infoselect[data-v-7ddb60a6] {\n  background: #fff;\n  padding-top: 24px;\n  margin-bottom: 10px;\n  padding-left: 10px;\n}\n.pagina[data-v-7ddb60a6] {\n  background: #fff;\n  padding: 10px;\n}\n.add-input .el-input__inner[data-v-7ddb60a6] {\n  width: 230px;\n}\n.add-infoselsect .el-form-item__label[data-v-7ddb60a6] {\n  width: 200px;\n}\n.add-form-div[data-v-7ddb60a6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding-bottom: 20px;\n}\n.add-form-div .tit[data-v-7ddb60a6] {\n    width: 80px;\n}\n.add-form-div .input[data-v-7ddb60a6] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.add-form-div .flex1[data-v-7ddb60a6] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n",""])},Qm4S:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("bOdI"),o=a.n(n),i={watch:{filterText:function(e){this.$refs.tree2.filter(e)}},methods:{getData:function(){var e=this;this.$axios.get("tianyujia/PackProjectAction!queryPackNameAndIntegratedName.action").then(function(t){console.log("查询所有的批次信息");var a=t.data.data;console.log(a),e.olddata=a,e.newdata=a;var n=e._.chunk(e.olddata,e.pageSize);e.tableDatas=n,e.tableData=n[0]}).catch(function(e){console.log(e)})},removeClick:function(e){console.log(e),this.deleData=e,this.deleDialogVisible=!0},removeBox:function(){var e=this,t={"pack.packProjectId":e.deleData.packProjectId};e.$axios({method:"post",url:"tianyujia/PackProjectAction!deletePackProject.action",data:e.qs.stringify(t)}).then(function(t){console.log(t),"true"==t.data.result?(e.addDialogVisible=!1,e.$notify({title:"成功",message:t.data.message,type:"success"}),e.getData(),e.deleDialogVisible=!1):(e.deleDialogVisible=!1,e.$notify({title:"警告",message:t.data.message,type:"warning"}))}).catch(function(e){console.log(e)})},editClick:function(e){console.log(e);this.addFormInline.proname=e.packProjectName,this.addFormInline.wbscode=e.packProjectWbs,this.addFormInline.olddata.uuid=e.packProjectNumber,this.addFormInline.year=e.integratedProject.integratedProjectYear,this.addFormInline.pcname=e.integratedProject.integratedProjectName,this.addFormInline.packProjectId=e.packProjectId,this.addDialogVisible=!0,this.popupData.type=0,this.popupData.mesg="更新打包数据"},addClickbox:function(){this.addDialogVisible=!0,this.popupData.type=1,this.popupData.mesg="新增打包"},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleCurrentChange:function(e){console.log("当前页: "+e);var t=e-1;console.log(e),this.tableData=this.tableDatas[t],console.log(this.tableDatas),console.log(this.tableData)},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},updFrom:function(){console.log(this.addFormInline);var e=this,t={"pack.packProjectName":e.addFormInline.proname,"pack.packProjectWbs":e.addFormInline.wbscode,"pack.packProjectNumber":e.addFormInline.olddata.uuid,"pack.org":e.addFormInline.olddata.org,"pack.integratedProject.integratedProjectId":e.addFormInline.pcname,"pack.packProjectId":e.addFormInline.packProjectId};e.$axios({method:"post",url:"tianyujia/PackProjectAction!updatePackProject.action",data:e.qs.stringify(t)}).then(function(t){console.log(t),"true"==t.data.result?(e.addDialogVisible=!1,e.$notify({title:"成功",message:t.data.message,type:"success"}),e.getData()):e.$notify({title:"警告",message:t.data.message,type:"warning"})}).catch(function(e){console.log(e)})},saveFrom:function(){console.log(this.addFormInline);var e=this,t={"pack.packProjectName":e.addFormInline.proname,"pack.packProjectWbs":e.addFormInline.wbscode,"pack.packProjectNumber":e.addFormInline.olddata.uuid,"pack.org":e.addFormInline.olddata.org,"pack.integratedProject.integratedProjectId":e.addFormInline.pcname};e.$axios({method:"post",url:"tianyujia/PackProjectAction!addPackProject.action",data:e.qs.stringify(t)}).then(function(t){console.log(t),"true"==t.data.result?(e.addDialogVisible=!1,e.$notify({title:"成功",message:t.data.message,type:"success"}),e.getData()):e.$notify({title:"警告",message:t.data.message,type:"warning"})}).catch(function(e){console.log(e)})},getAddData:function(){var e=this;e.$axios.get("tianyujia/PackProjectAction!addQuery.action").then(function(t){console.log("新增查询"),console.log(t.data),e.addFormInline.olddata=t.data.data;var a=e._.uniqBy(t.data.data.integrated,"integratedProjectYear");console.log(a),e.addFormInline.years=a}).catch(function(e){console.log(e)})},selectDate:function(e){console.log(e),console.log("选中了时间");var t=this;t.addFormInline.pcname="",t.$axios({method:"post",url:"tianyujia/IntegratedAction!queryZhpcByInfo.action",data:t.qs.stringify({"integratedProject.integratedProjectYear":e})}).then(function(e){console.log(e),console.log(e.data.data),t.addFormInline.pclists=e.data.data,console.log(t.addFormInline.pclists)}).catch(function(e){console.log(e)})},search:function(){console.log(this.formInline);var e=this,t=this.formInline.name,a=o()({},t,this.formInline.proname);e.$axios({method:"post",url:"tianyujia/PackProjectAction!queryScreenPackPRoject.action",data:e.qs.stringify(a)}).then(function(t){console.log("查询所有的批次信息");var a=t.data.data;console.log(a),e.newdata=a;var n=e._.chunk(a,e.pageSize);e.tableDatas=n,e.tableData=n[0]}).catch(function(e){})}},computed:{pagesNum:function(){return this.newdata.length}},mounted:function(){this.getData(),this.getAddData()},data:function(){return{formInline:{name:"",proname:""},addFormInline:{proname:"",wbscode:"",olddata:{uuid:"9d7ba5bb-139a-4bec-bf96-ec3044013eee","integrated|5":[{deleteMark:0,integratedProjectId:1,integratedProjectName:"测试综合批次",integratedProjectState:1,integratedProjectYear:"2018"}],org:{pname:"KD公司",name:"KD子公司"}},buscode:"",year:"",years:[],pclists:[],pcname:"",packProjectId:""},tableDatas:[],tableData:[],pageSize:4,addDialogVisible:!1,olddata:"",newdata:"",deleDialogVisible:!1,deleData:"",popupData:{mesg:"新增打包",type:1}}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container bg"},[a("div",{staticClass:"infoselect"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"选择筛选"}},[a("el-select",{attrs:{placeholder:"选择筛选条件"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}},[a("el-option",{attrs:{label:"项目名称",value:"pack.packProjectName"}}),e._v(" "),a("el-option",{attrs:{label:"批次名称",value:"pack.integratedProject.integratedProjectName"}}),e._v(" "),a("el-option",{attrs:{label:"WBS编码",value:"pack.packProjectWbs"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"输入"}},[a("el-input",{attrs:{placeholder:"筛选字"},model:{value:e.formInline.proname,callback:function(t){e.$set(e.formInline,"proname",t)},expression:"formInline.proname"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"warn"},on:{click:e.addClickbox}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.popupData.mesg,visible:e.addDialogVisible,width:"30%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("div",{staticClass:"infoselect add-infoselsect"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addFormInline}},[a("div",{staticClass:"add-form-div"},[a("div",{staticClass:"tit"},[e._v("\n                项目名称: \n              ")]),e._v(" "),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.addFormInline.proname,callback:function(t){e.$set(e.addFormInline,"proname",t)},expression:"addFormInline.proname"}})],1)]),e._v(" "),a("div",{staticClass:"add-form-div"},[a("div",{staticClass:"tit"},[e._v("\n                项目WBS编码: \n              ")]),e._v(" "),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.addFormInline.wbscode,callback:function(t){e.$set(e.addFormInline,"wbscode",t)},expression:"addFormInline.wbscode"}})],1)]),e._v(" "),a("div",{staticClass:"add-form-div"},[a("div",{staticClass:"tit"},[e._v("\n                业务编码: \n              ")]),e._v(" "),a("div",{staticClass:"input"},[a("div",[e._v(e._s(e.addFormInline.olddata.uuid))])])]),e._v(" "),a("div",{staticClass:"add-form-div"},[a("div",{staticClass:"flex1"},[e._v("\n                 地市公司：\n                 "),a("span",[e._v("\n                   "+e._s(e.addFormInline.olddata.org.pname)+"\n                 ")])]),e._v(" "),a("div",{staticClass:"flex1"},[e._v("\n                  省公司：\n                 "),a("span",[e._v("\n                   "+e._s(e.addFormInline.olddata.org.name)+"\n                 ")])])]),e._v(" "),a("div",{staticClass:"add-form-div"},[a("div",{staticClass:"tit"},[e._v("\n                批次年度: \n              ")]),e._v(" "),a("div",{staticClass:"addFormInline"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectDate},model:{value:e.addFormInline.year,callback:function(t){e.$set(e.addFormInline,"year",t)},expression:"addFormInline.year"}},e._l(e.addFormInline.years,function(e){return a("el-option",{key:e.integratedProjectName,attrs:{label:e.integratedProjectYear,value:e.integratedProjectYear}})}))],1)]),e._v(" "),a("div",{staticClass:"add-form-div"},[a("div",{staticClass:"tit"},[e._v("\n                批次名字: \n              ")]),e._v(" "),a("div",{staticClass:"input"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addFormInline.pcname,callback:function(t){e.$set(e.addFormInline,"pcname",t)},expression:"addFormInline.pcname"}},e._l(e.addFormInline.pclists,function(e){return a("el-option",{key:e.integratedProjectName,attrs:{label:e.integratedProjectName,value:e.integratedProjectId}})}))],1)])])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),1==e.popupData.type?a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.saveFrom}},[e._v("保存")])],1):a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.updFrom}},[e._v("更新")])],1)],1)]),e._v(" "),a("div",{staticClass:"tablebox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"packProjectName",label:"项目名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"integratedProject.integratedProjectName",label:"批次名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"integratedProject.integratedProjectYear",label:"批次年度",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"packProjectWbs",label:"项目WBS编码",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"packProjectNumber",label:"业务编码"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.editClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.removeClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagina"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.pagesNum},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.deleDialogVisible=t}}},[a("span",[e._v("你将要删除一条打包信息")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.removeBox}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(i,l,!1,function(e){a("/qcU")},"data-v-7ddb60a6",null);t.default=d.exports},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var n,o=a("C4MV"),i=(n=o)&&n.__esModule?n:{default:n};t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},mClu:function(e,t,a){var n=a("kM2E");n(n.S+n.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});