webpackJsonp([6],{QxPz:function(e,t,a){var n=a("egjG");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("5a6148c7",n,!0)},egjG:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.markred[data-v-7ecc816e] {\n  color: red;\n}\n.tablebox[data-v-7ecc816e] {\n  height: 300px;\n  background: #fff;\n  padding: 10px;\n}\n.bg[data-v-7ecc816e] {\n  background: #efefef;\n  height: 100%;\n}\n.infoselect[data-v-7ecc816e] {\n  background: #fff;\n  padding-top: 24px;\n  margin-bottom: 10px;\n  padding-left: 10px;\n}\n.pagina[data-v-7ecc816e] {\n  background: #fff;\n  padding: 10px;\n}\n",""])},pnPz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={watch:{filterText:function(e){this.$refs.tree2.filter(e)}},methods:{getData:function(){var e=this;this.$axios.get("tianyujia/IntegratedAction!query_zhpc.action").then(function(t){console.log("查询所有的批次信息");var a=t.data.data;e.olddata=a,e.newdata=a;var n=e._.chunk(e.olddata,e.pageSize);e.tableDatas=n,e.tableData=n[0]}).catch(function(e){console.log(e)})},notifyTit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"成功";this.$notify({title:t,message:e,type:"success"})},removeClickbox:function(){var e=this,t=this.postData;e.$axios({method:"post",url:"tianyujia/IntegratedAction!deleteZhpc.action",data:e.qs.stringify(t)}).then(function(t){console.log(t),"true"==t.data.result&&(e.deleDialogVisible=!1,e.notifyTit("删除一条批次信息"),e.getData())}).catch(function(e){console.log(e)})},removeClick:function(e){console.log(e);var t={integratedProject_id:e.integratedProjectId,integratedProject_state:e.integratedProjectState};this.postData=t,this.deleDialogVisible=!0},editClick:function(e){this.actstate=0,this.saveDialogVisible=!0,console.log(e),this.addFormInline={name:e.integratedProjectName,year:e.integratedProjectYear,state:"1"==e.integratedProjectState?"下达":"未下达"},this.editdata=e},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleCurrentChange:function(e){console.log("当前页: "+e);var t=e-1;console.log(e),this.tableData=this.tableDatas[t],console.log(this.tableDatas),console.log(this.tableData)},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},updataFrom:function(){var e,t=this;e={"integratedProject.integratedProjectId":t.editdata.integratedProjectId,"integratedProject.integratedProjectName":t.addFormInline.name,"integratedProject.integratedProjectYear":t.addFormInline.year,"integratedProject.integratedProjectState":"未下达"==t.addFormInline.state?0:t.addFormInline.state},console.log(e),t.$axios({method:"post",url:"tianyujia/IntegratedAction!updateZhpc.action",data:t.qs.stringify(e)}).then(function(e){"true"==e.data.result?(t.saveDialogVisible=!1,t.$notify({title:"成功",message:e.data.message,type:"success"}),t.getData()):t.$notify.error({title:"错误",message:e.data.message})}).catch(function(e){console.log(e)})},saveFrom:function(){console.log(this.addFormInline);var e=this;this.actstate=1;var t={"integratedProject.integratedProjectName":this.addFormInline.name,"integratedProject.integratedProjectYear":this.addFormInline.year,"integratedProject.integratedProjectState":this.addFormInlinestate};e.$axios({method:"post",url:"tianyujia/IntegratedAction!addZhpc.action",data:e.qs.stringify(t)}).then(function(t){console.log(t),console.log(t.data),console.log(t.data.result),"true"==t.data.result?(e.saveDialogVisible=!1,e.$notify({title:"成功",message:t.data.message,type:"success"}),e.getData()):e.$notify.error({title:"错误",message:t.data.message})}).catch(function(e){console.log(e)})},search:function(){console.log(this.formInline);var e=this,t={"integratedProject.integratedProjectName":this.formInline.name,"integratedProject.integratedProjectState":this.formInline.state,"integratedProject.integratedProjectYear":this.formInline.year};e.$axios({method:"post",url:"tianyujia/IntegratedAction!queryZhpcByInfo.action",data:e.qs.stringify(t)}).then(function(t){console.log("查询所有的批次信息");var a=t.data.data;e.newdata=a;var n=e._.chunk(a,e.pageSize);e.tableDatas=n,e.tableData=n[0]}).catch(function(e){})}},computed:{pagesNum:function(){return this.newdata.length}},mounted:function(){this.getData()},data:function(){return{formInline:{name:"",year:"",state:""},addFormInline:{name:"",year:"",state:""},tableDatas:[],tableData:[],pageSize:4,saveDialogVisible:!1,deleDialogVisible:!1,olddata:"",newdata:"",postData:"",actstate:1,updDatapost:"",editdata:""}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container bg"},[a("div",{staticClass:"infoselect"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"批次名称"}},[a("el-select",{attrs:{placeholder:"批次名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}},e._l(e.olddata,function(e){return a("el-option",{key:e.integratedProjectName,attrs:{label:e.integratedProjectName,value:e.integratedProjectName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"批次年度"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.formInline.year,callback:function(t){e.$set(e.formInline,"year",t)},expression:"formInline.year"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"批次状态"}},[a("el-select",{attrs:{placeholder:"批次状态"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[a("el-option",{attrs:{label:"未下达",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"下达",value:"1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"warn"},on:{click:function(t){e.saveDialogVisible=!0}}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑批次",visible:e.saveDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.saveDialogVisible=t}}},[a("div",{staticClass:"infoselect"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addFormInline}},[a("el-form-item",{attrs:{label:"批次名称"}},[a("el-input",{attrs:{placeholder:"批次名称"},model:{value:e.addFormInline.name,callback:function(t){e.$set(e.addFormInline,"name",t)},expression:"addFormInline.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"批次年度"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.addFormInline.year,callback:function(t){e.$set(e.addFormInline,"year",t)},expression:"addFormInline.year"}})],1),e._v(" "),1==e.actstate?a("div",[a("el-form-item",{attrs:{label:"批次状态"}},[a("el-select",{attrs:{placeholder:"批次状态"},model:{value:e.addFormInline.state,callback:function(t){e.$set(e.addFormInline,"state",t)},expression:"addFormInline.state"}},[a("el-option",{attrs:{label:"未下达",value:"0"}})],1)],1)],1):a("div",[a("el-form-item",{attrs:{label:"批次状态"}},[a("el-select",{attrs:{placeholder:"批次状态"},model:{value:e.addFormInline.state,callback:function(t){e.$set(e.addFormInline,"state",t)},expression:"addFormInline.state"}},[a("el-option",{attrs:{label:"未下达",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"下达",value:"1"}})],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.saveDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),1==e.actstate?a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.saveFrom}},[e._v("保存")])],1):a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.updataFrom}},[e._v("修改")])],1)],1)]),e._v(" "),a("div",{staticClass:"tablebox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"integratedProjectName",label:"批次名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"integratedProjectYear",label:"批次年度",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"批次状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:1==t.row.integratedProjectState?" ":"markred",staticStyle:{"margin-left":"10px"}},[e._v(e._s(1==t.row.integratedProjectState?"下达":"未下达"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.editClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.removeClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagina"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.pagesNum},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"提示",visible:e.deleDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.deleDialogVisible=t}}},[a("span",[e._v("你将删除一条批次")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.removeClickbox}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,o,!1,function(e){a("QxPz")},"data-v-7ecc816e",null);t.default=i.exports}});